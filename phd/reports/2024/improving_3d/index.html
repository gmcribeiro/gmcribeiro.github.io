<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Improving 3D reconstruction | Gonçalo Ribeiro </title> <meta name="author" content="Gonçalo Ribeiro"> <meta name="description" content="Meeting preparation and support"> <meta name="keywords" content="Computer vision, Vibrations, 3D reconstructions, 2D and 3D Motion magnification, Camera calibration"> <link rel="stylesheet" href="/phd/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/phd/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/phd/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/phd/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%93%89&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/phd/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://goncalor00.github.io/phd/reports/2024/improving_3d/"> <script src="/phd/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/phd/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/phd/"> <span class="font-weight-bold">Gonçalo</span> Ribeiro </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/phd/">About </a> </li> <li class="nav-item active"> <a class="nav-link" href="/phd/reports/index.html">Reports </a> </li> <li class="nav-item "> <a class="nav-link" href="/phd/timeline/">Timeline </a> </li> <li class="nav-item "> <a class="nav-link" href="/phd/projects/">Projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/phd/publications/">Publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/phd/repositories/">Repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/phd/sota/">SOTA </a> </li> <li class="nav-item "> <a class="nav-link" href="/phd/courses/">Courses </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search (ctrl + k)" onclick="openSearchModal()"> <span class="nav-link">Search <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Improving 3D reconstruction</h1> <p class="post-meta"> Created in June 21, 2024 </p> <p class="post-tags"> <i class="fa-solid fa-calendar fa-sm"></i> 2024   ·   <i class="fa-solid fa-hashtag fa-sm"></i> Computer Vision   <i class="fa-solid fa-hashtag fa-sm"></i> Feature Matching   <i class="fa-solid fa-hashtag fa-sm"></i> 3D Reconstruction   ·   <i class="fa-solid fa-tag fa-sm"></i> meeting-support   <i class="fa-solid fa-tag fa-sm"></i> meeting-preparation </p> </header> <article class="post-content"> <div id="markdown-content"> <p>The idea of the previous meeting was to use more viewpoints, but the current “solution” is not robust enough. So, I worked more on studying ways to improve the robustness of each pipeline step.</p> <h3 id="quick-concept-recap">Quick concept recap</h3> <p>Knowing the fundamental matrix (obtained by knowing at least 8 matching points between 2 images), we can map a point of the first image to a line of the second image. The correspondent point, if present in the image, will be somewhere in that line.</p> <div class="col-sm mt-3 mt-md-0" style="text-align: center"> <figure> <video src="/phd/assets/posts/vid/05_2024/2024-05-2314-59-48-ezgif.com-video-to-mp4-converter.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls=""></video> </figure> </div> <div class="caption"> This narrows the search to a 1D search, simplifying the problem considerably. Doing this to the entire image allows, with the intrinsic parameters and more processing, the creation of a 3D cloud. This process is called (not entirely sure) dense matching. </div> <p>I started by trying to improve the “dense matching” algorithm since the matching algorithm in the 1D search is very simplistic and not robust enough. So, I started adapting the code to be compatible with feature-detection algorithms, which I believe will give much better results but take much more time to compute.</p> <p>This leads to two options:</p> <ul> <li> Send the ROI of the image for the 1D search: <div class="col-sm mt-3 mt-md-0" style="text-align: center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/phd/assets/posts/img/06_2024/Untitled%20-%20Frame%201(1)-480.webp 480w,/phd/assets/posts/img/06_2024/Untitled%20-%20Frame%201(1)-800.webp 800w,/phd/assets/posts/img/06_2024/Untitled%20-%20Frame%201(1)-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/phd/assets/posts/img/06_2024/Untitled%20-%20Frame%201(1).jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> I could not figure out if the feature-detection algorithms ignore the black region or not, and that's the reason why there is an option 2 </li> <li> The second option is more tricky. It involves sending a rectangular image to the feature-detection algorithm to ensure that only the ROI is analyzed. To achieve that, the first step is to rotate the image with the angle of inclination of the epipolar line resulting on the image of the window “Rotated image”; This way, the ROI is a rectangular section of the image, like in the window “Cropped to the window height”, removing the black regions. <div class="col-sm mt-3 mt-md-0" style="text-align: center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/phd/assets/posts/img/06_2024/Screenshot_20240604_174243%20(copy)-480.webp 480w,/phd/assets/posts/img/06_2024/Screenshot_20240604_174243%20(copy)-800.webp 800w,/phd/assets/posts/img/06_2024/Screenshot_20240604_174243%20(copy)-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/phd/assets/posts/img/06_2024/Screenshot_20240604_174243%20(copy).png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> I have some doubts about this method, starting with the fact that the epipolar line is not well defined (the thickness of the line is not 1 pixel—window “Section of the cropped image”). Worse than that, I don’t know if applying the feature-detection algorithm to the entire image with a very high number of keypoints and then applying the ROI only to the feature-match algorithm won't give similar results with less computational cost. </li> </ul> <p>Eventually, I put these studies on hold and studied ways to find the common region between the two viewpoints. This will help in the future to solve the occlusions problem. ChatGPT and Bing chat gave me the following directions:</p> <ul> <li> “Traditional” approaches: <ul> <li> Estimate homography using feature detection and matching algorithms and use the homography to warp one image onto the other and find common regions. Here is an illustration of warping operation:<br> Image 1: <div class="col-sm mt-3 mt-md-0" style="text-align: center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/phd/assets/posts/img/06_2024/img_0_1-480.webp 480w,/phd/assets/posts/img/06_2024/img_0_1-800.webp 800w,/phd/assets/posts/img/06_2024/img_0_1-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/phd/assets/posts/img/06_2024/img_0_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> Image 2: <div class="col-sm mt-3 mt-md-0" style="text-align: center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/phd/assets/posts/img/06_2024/img_0_2-480.webp 480w,/phd/assets/posts/img/06_2024/img_0_2-800.webp 800w,/phd/assets/posts/img/06_2024/img_0_2-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/phd/assets/posts/img/06_2024/img_0_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> Aligned image 1: <div class="col-sm mt-3 mt-md-0" style="text-align: center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/phd/assets/posts/img/06_2024/aligned%20image%201_screenshot_20.06.2024-480.webp 480w,/phd/assets/posts/img/06_2024/aligned%20image%201_screenshot_20.06.2024-800.webp 800w,/phd/assets/posts/img/06_2024/aligned%20image%201_screenshot_20.06.2024-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/phd/assets/posts/img/06_2024/aligned%20image%201_screenshot_20.06.2024.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> The chat only suggests doing a bit-wise operation to find the common region, but that doesn’t make sense since the background is totally different. I kept this here because the object (a sheet of paper) gets a similar shape between the two images, and I could use that to identify and isolate the object. </li> <li> Block Comparison: Basically, divide the image into small blocks and compare each block of image 1 to every block of image 2 and save the blocks with similarity bigger than a threshold </li> </ul> </li> <li> Machine learning: From the two chats, the suggestions were: Siamese networks, collaborative segmentation, stereo matching networks, image registration networks, and deep image matching. I didn’t explore these fields because I felt that I needed a deeper understanding of machine learning, and I started taking an online course on the subject. </li> </ul> <p>During these studies, I had a problem with my computer: I neglected the updates and started not being able to install anything. I formatted the computer and took the opportunity to start working only on docker environments to prevent losing the dependencies of the code that I have in the event of having to format the computer again. When I tested the code, it was much slower in the C++ part. After building from source different versions of OpenCV, GCC an G++ I finally found the issue 🤦‍♂️:</p> <div class="col-sm mt-3 mt-md-0" style="text-align: center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/phd/assets/posts/img/06_2024/2024-06-20-164316_hyprshot-480.webp 480w,/phd/assets/posts/img/06_2024/2024-06-20-164316_hyprshot-800.webp 800w,/phd/assets/posts/img/06_2024/2024-06-20-164316_hyprshot-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/phd/assets/posts/img/06_2024/2024-06-20-164316_hyprshot.png" class="img-fluid rounded z-depth-1" width="250" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/phd/reports/2024/first_research_3d_motion_magnification/">First research on 3D motion magnification</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/phd/reports/2024/3d_lightglue/">LightGlue on 3D reconstruction</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/phd/reports/2024/testing_lightglue/">Testing LightGlue</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/phd/reports/2024/paper_sheet_holder/">Paper sheet holder</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/phd/reports/2024/improving_3d_report/">Improving 3D reconstruction</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Gonçalo Ribeiro. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/phd/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/phd/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/phd/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/phd/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/phd/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/phd/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/phd/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/phd/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/phd/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/phd/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/phd/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/phd/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/phd/assets/js/search-data.js"></script> <script src="/phd/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>